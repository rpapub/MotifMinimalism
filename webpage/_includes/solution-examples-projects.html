{% comment %}
Renders the list of included projects as a tab group.

Expects input:
  - sol: solution object containing sol.projects (array)
  - active: optional string (name of project tab to activate, already slugified)

Each tab is keyed by project.name | slugify.

If a project defines `images`, a preview + dialog carousel is included using:
  {% include wa-carousel.html images=project.images unique_id=project.Id %}
  This ensures the carousel is isolated via a UID (project.Id or fallback).
{% endcomment %}

<wa-tab-group{% if active %} active="{{ active }}"{% endif %}>
  {% for project in sol.projects %}
    {% assign tab_name = project.name | default: "Unnamed" | slugify %}
    <wa-tab panel="{{ tab_name }}">{{ project.name | default: "Unnamed Project" }}</wa-tab>
  {% endfor %}

  {% for project in sol.projects %}
    {% assign tab_name = project.name | default: "Unnamed" | slugify %}
    <wa-tab-panel name="{{ tab_name }}">
      <h3>{{ project.name | default: "Unnamed Project" }}</h3>

      <p><strong>Type:</strong> {{ project.type }}</p>
      <p><strong>Description:</strong> {{ project.description }}</p>

      {% if project.inputs %}
        <h4>Inputs</h4>
        <pre style="white-space: pre-wrap; word-break: break-word; overflow-x: auto;">
<code class="language-json">{{ project.inputs | jsonify }}</code></pre>
      {% endif %}

      {% if project.outputs %}
        <h4>Outputs</h4>
        <pre style="white-space: pre-wrap; word-break: break-word; overflow-x: auto;">
<code class="language-json">{{ project.outputs | jsonify }}</code></pre>
      {% endif %}

      {% if project.images %}
        {% assign uid = project.id | default: project.name | slugify %}
        {% include wa-carousel.html images=project.images unique_id=uid %}
      {% endif %}
    </wa-tab-panel>
  {% endfor %}
</wa-tab-group>
